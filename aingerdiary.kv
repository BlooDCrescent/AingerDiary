#encoding: utf-8


<MainScreen>:
    BoxLayout:
        size_hint: 1, 1
        orientation: 'vertical'
        Button:
            text: "Посмотреть статистику"
            on_press: root.manager.switch_show()
        Button:
            text: "Добавить попытки"
            on_press: root.manager.switch_date()
        Button:
            text: "Добавить тренировки"
            on_press: root.switch_training()


<ShowScreen>:
    graph_container: graph_container
    BoxLayout:
        orientation: 'vertical'
        size_hint: 1, 1
        id: graph_container
        Button:
            size_hint: 1, 0.2
            text: "Назад"
            on_press: root.prev()


<AskWidget>:
    label: label
    check_box: check_box
    orientation: 'horizontal'
    Label:
        text: ""
        size_hint_x: 0.2
    CheckBox:
        id: check_box
        size_hint_x: 0.1
    Label:
        id: label
        text_size: self.size
        halign: 'justify'
        valign: 'middle'
        size_hint_x: 0.4
    Label:
        size_hint_x: 0.2
        text: ""


<AskTextWidget>:
    text_input: text_input
    orientation: 'horizontal'
    Label:
        id: label
        size_hint_x: 0.8
    TextInput:
        id: text_input
        size_hint_x: 0.2

# TODO сделать дополнительный экран про тренировки
<TrainingScreen>:
    BoxLayout:
        orientation: 'vertical'
        size_hint: 1, 1
        BoxLayout:
            orientation: 'horizontal'
            Button:
                text: "Сделана проверка на реальность"
            TextInput:
                text: '0'
            Button:
                text: "X"
        BoxLayout:
            orientation: 'horizontal'
            Button:
                text: "Выполнена тренировка техник"
            TextInput:
                text: '0'
            Button:
                text: "X"
        AskNumWidget:
            id: num_dreams
            label_text: "Количество снов"
        BoxLayout:
            orientation: 'horizontal'
            Button:
                text: "Назад"
                on_press: root.prev()
            Button:
                text: "Подтвердить"
                on_press: root.next()


<TechniqueScreen>:
    BoxLayout:
        orientation: 'vertical'
        size_hint: 1, 1
        AskWidget:
            id: ask_straight
            label_text: "Использовались ли прямые техники?"
        AskWidget:
            id: ask_dream
            label_text: "Был ли сон?"
        AskWidget:
            id: ask_lucid
            label_text: "Было ли осознание во сне?"
            disabled: True
        AskWidget:
            id: ask_indirect
            label_text: "Использовались ли непрямые техники?"
            disabled: True
        AskWidget:
            id: ask_training
            label_text: "Были ли тренировки?"
        BoxLayout:
            orientation: 'horizontal'
            Button:
                text: "Назад"
                on_press: root.prev()
            Button:
                text: "Далее"
                on_press: root.next()


<StraightScreen>:
    BoxLayout:
        orientation: 'vertical'
        size_hint: 1, 1
        Label:
            text: "Укажите тип прямых техник"
        GridLayout:
            rows: 3
            cols: 4
            Label:
                text: ''
                size_hint_x: 0.4
            CheckBox:
                id: cycle
                group: 1
                size_hint_x: 0.1
            Label:
                text: "Циклирование"
                text_size: self.size
                halign: 'justify'
                valign: 'middle'
                size_hint_x: 0.4
            Label:
                text: ''
                size_hint_x: 0.2
            Label:
                text: ''
                size_hint_x: 0.4
            CheckBox:
                id: alternation
                group: 1
                size_hint_x: 0.1
            Label:
                text: "Чередование"
                text_size: self.size
                halign: 'justify'
                valign: 'middle'
                size_hint_x: 0.4
            Label:
                text: ''
                size_hint_x: 0.2
            Label:
                text: ''
                size_hint_x: 0.4
            CheckBox:
                id: one_technique
                group: 1
                size_hint_x: 0.1
            Label:
                text: "Одна техника"
                text_size: self.size
                halign: 'justify'
                valign: 'middle'
                size_hint_x: 0.4
            Label:
                text: ''
                size_hint_x: 0.2
        AskWidget:
            id: straight_success
            label_text: "Были ли прямые техники успешны?"
        AskNumWidget:
            id: straight_success_count
            label_text: "Количество успешных прямых выходов"
            minimum: 1
            disabled: True
        BoxLayout:
            orientation: 'horizontal'
            Button:
                text: "Назад"
                on_press: root.prev()
            Button:
                text: "Далее"
                on_press: root.next()


<LucidScreen>:
    BoxLayout:
        size_hint: 1, 1
        orientation: 'vertical'
        AskNumWidget:
            id: dream_quality
            label_text: "Качество сна (от 1 до 10)"
            maximum: 10
            minimum: 1
        AskNumWidget:
            id: number_of_lucid_dreams
            label_text: "Количество осознаний во сне"
            maximum: 0
            minimum: 1
            disabled: True
        AskNumWidget:
            id: number_of_indirect_tries
            label_text: "Количество непрямых пробуждений"
            disabled: True
        BoxLayout:
            orientation: 'horizontal'
            Button:
                text: "Назад"
                on_press: root.prev()
            Button:
                text: "Далее"
                on_press: root.next()



<IndirectScreen>:
    BoxLayout:
        size_hint: 1, 1
        orientation: 'vertical'
        AskNumWidget:
            id: brightness
            label_text: "Укажите яркость пробуждения (от 1 до 10)"
            minimum: 1
            maximum: 10
        AskWidget:
            id: was_moving
            label_text: "Было ли движение?"
        AskWidget:
            id: try_division
            label_text: "Была ли попытка разделения?"
        AskWidget:
            id: division_exit
            label_text: "Была ли попытка разделения успешной?"
            disabled: True
        AskNumWidget:
            id: number_of_cycles
            label_text: "Количество циклов техник"
            minimum: 0
            maximum: 0
        AskWidget:
            id: technique_exit
            label_text: "Был ли совершен выход при помощи техник?"
        AskWidget:
            id: undesired_asleep
            label_text: "Было ли непроизвольное засыпание?"
        AskWidget:
            id: desired_asleep
            label_text: "Было ли засыпание с намерением повторного выхода?"
        BoxLayout:
            orientation: 'horizontal'
            Button:
                text: "Назад"
                on_press: root.prev()
            Button:
                text: "Далее"
                on_press: root.next()


<ExitScreen>:
    BoxLayout:
        size_hint: 1, 1
        orientation: 'vertical'
        Label:
            id: screen_type
            text: "Пустой экран"
        AskWidget:
            id: was_deepening
            label_text: "Было ли углубление?"
        AskWidget:
            id: was_holding
            label_text: "Было ли удержание?"
        AskNumWidget:
            id: items_done
            label_text: "Пунктов плана действий выполнено:"
            maximum: 0
            minimum: 0
        AskWidget:
            id: was_catch
            label_text: "Была ли попытка зацепиться за фазу?"
        AskWidget:
            id: was_repeated_try
            label_text: "Была ли попытка повторного выхода?"
        AskWidget:
            id: was_repeated_success
            label_text: "Была ли попытка повторного выхода успешной?"
        BoxLayout:
            orientation: 'horizontal'
            Button:
                text: "Назад"
                on_press: root.prev()
            Button:
                text: "Далее"
                on_press: root.next()


<SetStatisticsScreen>:
    BoxLayout:
        size_hint: 1, 1
        orientation: 'vertical'
        AskTextWidget:
            id: aggression
            label_text: "Агрессия"
        AskTextWidget:
            id: mechanic
            label_text: "Механичность"
        AskTextWidget:
            id: confidence
            label_text: "Уверенность"
        AskTextWidget:
            id: at_all_costs
            label_text: "Во что бы то ни стало"
        AskTextWidget:
            id: intention
            label_text: "Намерение"
        BoxLayout:
            orientation: 'horizontal'
            Button:
                text: "Назад"
                on_press: root.prev()
            Button:
                text: "Подтвердить"
                on_press: root.next()

# TODO написать экран для записи снов в дневник
<DreamDiaryScreen>:
    BoxLayout:
        size_hint: 1, 1
        orientation: 'vertical'
        Label:
            text: "Введите описание сна:"
        TextInput:
            id: dream
            text: ""
        BoxLayout:
            Button:
                text: "Назад"
                on_press: root.prev()
            Button:
                text: "Далее"
                on_press: root.next()


<EndScreen>:
    BoxLayout:
        size_hint: 1, 1
        orientation: 'vertical'
        Label:
            text: "Заглушка для последнего экрана"
        Button:
            text: "Назад"
            on_press: root.prev()


<AskDateScreen>:
    pick: pick
    BoxLayout:
        size_hint: 1, 1
        orientation: 'vertical'
        Label:
            text: "Укажите дату"
            size_hint_y: 0.2
        DatePicker:
            id: pick
        BoxLayout:
            orientation: "horizontal"
            size_hint_y: 0.3
            Button:
                text: "Назад"
                on_press: root.prev()
            Button:
                text: "Продолжить"
                on_press: root.next()